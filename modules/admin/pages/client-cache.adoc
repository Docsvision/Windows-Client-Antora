= Клиентский кэш данных

Кэш -- промежуточный буфер с быстрым доступом, содержащий информацию, которая может быть запрошена с наибольшей вероятностью. Данные из кэша могут быть получены быстрее чем из БД. Также использование клиентского кэша призвано снизить нагрузку на сервер {dv}.

По умолчанию клиентский кэш размещается в папках `DVCache` и `DVScriptCache` временной папки пользователя (`C:\Users\Имя-Пользователя\AppData\Local\Temp\`).

* Папка `DVCache` предназначена для хранения данных карточек и файлов.
* Папка `DVScriptCache` предназначена для хранения скриптов карточек.

Файлы кэша карточек хранятся в папке `%temp%\DVCache\Имя-базы-данных\Идентификатор-пользователя\`. Имя кэшированного файла формируется по шаблону `ИдентификаторФайла_ДатаИзмененияФайлаКакДробное.dat`.

[#setup]
== Настройка кэширования данных

Режим клиентского кэширования для всех пользователей xref:5.5.5@platform:admin:console-server.adoc[настраивается] в программе {cns}.

Если требуется, администратор может переопределить режим кэширования для отдельного пользователя или всех пользователей определённого компьютера.

. Откройте редактор реестра на компьютере пользователя, для которого нужно установить собственный режим кэширования.
. Перейдите к ветке: `{hklm-dv}\Platform\5.5\ObjectManager`.
+
* `{hklm-dv}\Platform\5.5\ObjectManager`, чтобы настроить режим кэширования для всех пользователей компьютера;
* `HKEY_CURRENT_USER\SOFTWARE\Docsvision\Platform\5.5\ObjectManager`, чтобы настроить режим кэширования для текущего пользователя.
+
Если раздел `ObjectManager` отсутствует, создайте его самостоятельно.
+
.Приоритетность настроек:
****
* Локальная настройка в реестре приоритетнее настройки на сервере.
* Локальная настройка в ветке `HKEY_CURRENT_USER` приоритетнее, чем настройка в ветке `{hklm}`.
****
+
. Создайте или измените параметр `CacheMode`:
+
* Тип: `DWORD`
* Значение:
** `1` -- если требуется кэшировать карточки.
** `2` -- если требуется кэшировать файлы.
** `4` -- если требуется кэшировать справочники.
+
Установите в `CacheMode` сумму значений, чтобы кэшировались карточки, файлы, справочники. Например, для кэширования только справочников и файлов, результирующее значение будет равно `2`+`4` = `6`.

[#clean]
== Очистка клиентского кэша

.Если требуется, администратор может очистить клиентский кэш, удалив папки:
* `C:\Users\Имя-Пользователя\AppData\Local\Temp\DVCache`;
* `C:\Users\Имя-Пользователя\AppData\Local\Temp\DVScriptCache`.

При запуске {wincl}а данные папки будут созданы автоматически. Первое открытие карточек, данные которых были очищены из кэша, будет происходить медленнее, чем до очистки.
