= Управление состоянием сотрудника

В системе _{dv}_ предусмотрено несколько способов смены состояния сотрудника. Администратор может изменить состояние любого сотрудника в карточке сотрудника в _Справочнике сотрудников_. Также сотрудник может самостоятельно изменить собственное состояние из xref:interface-status-bar.adoc[строки состояния] программы _{wincl}_. Для отслеживания и изменения состояния на время периода неактивности и возврата к активному состоянию по окончанию данного периода используется служебный бизнес-процесс.

[CAUTION]
====
При смене состояния администратором из _Справочника сотрудников_, соответствующее поле в _Строке состояния_ будет обновлено только после перезапуска приложения _{wincl}_, а при самостоятельной смене из _Строки состояния_ -- сразу же после изменения.
====

Чтобы изменить свое состояние из командной строки, выполните следующие действия:

. Перейдите в главное окно приложения _{wincl}_.
. В строке состояния щелкните левой клавишей мыши на поле для отображения текущего состояния сотрудника.
+
image::State_changebutton_command_line.png[Кнопка для смены состояния сотрудника в строке состояния]
+
Будет открыто окно *Смена состояния*, поля которого повторяют аналогичные поля карточки сотрудника в _Справочнике сотрудников_.

image::State_change_command_line.png[Смена состояния сотрудника]
. В поле *Текущее состояние сотрудника* выберите из списка свое текущее состояние.
. В поле *Состояние в период неактивности* укажите состояние, которое должно быть установлено в течение Вашего периода отсутствия. В поле доступны состояния: _Болен_, _В отпуске_, _В командировке_, _Отсутствует_.
. В поле *Период отсутствия* задайте начальную и конечную даты периода своего отсутствия.
. При необходимости в поле *Заместители* назначьте заместителей на время своего отсутствия.
. Нажмите на кнопку *ОК*.
+
Выполненные настройки будут сохранены в карточке сотрудника _Справочника сотрудников_. Будет выполнено изменение текущего состояния сотрудника на указанное в поле. После наступления даты начала периода неактивности *Текущее* состояние сотрудника будет изменено на состояние, указанное в поле *Состояние в период неактивности*.

Если приложение _{wincl}_ будет запущено во время периода неактивности, пользователю будет выдано сообщение с предложением изменения состояния на активное:

* Если статус был изменен на неактивный, и не назначены заместители, появится сообщение: `Перевести учетную запись в                                     активное состояние?`;
* Если статус был изменен на неактивный, и назначены заместители, появится сообщение: `Для Вашей учетной записи в                                     настоящий момент действует замещение. Вы хотите отключить                                     замещение сейчас? Если Вы ответите "Нет", будет произведен вход                                     в систему без отключения замещения!`.

При запуске _{wincl}_ сотрудником, который назначен заместителем, появится сообщение: `Вы назначены                             заместителем для сотрудника <ФИО1> с <дата> по <дата>,                             <ФИО2> с <дата> по <дата>…`. Если назначено несколько заместителей, сообщение получит первый активный заместитель.
