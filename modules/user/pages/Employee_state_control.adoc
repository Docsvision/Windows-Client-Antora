= Управление состоянием сотрудника

В системе _{dv}_ предусмотрено несколько способов смены состояния сотрудника. Администратор может изменить состояние любого сотрудника в карточке сотрудника в _Справочнике сотрудников_. Также сотрудник может самостоятельно изменить собственное состояние из xref:Interface_state_line.adoc[строки состояния] программы _{wincl}_. Для отслеживания и изменения состояния на время периода неактивности и возврата к активному состоянию по окончанию данного периода используется служебный бизнес-процесс.

[NOTE]
====
[.note__title]#Внимание:# При смене состояния администратором из _Справочника сотрудников_, соответствующее поле в _Строке состояния_ будет обновлено только после перезапуска приложения _{wincl}_, а при самостоятельной смене из _Строки состояния_ -- сразу же после изменения.
====

Чтобы изменить свое состояние из командной строки, выполните следующие действия:

. [.ph .cmd]#Перейдите в главное окно приложения _{wincl}_. #
. [.ph .cmd]#В строке состояния щелкните левой клавишей мыши на поле для отображения текущего состояния сотрудника.#
+
image::img/State_changebutton_command_line.png[[.fig--title-label]##Рис. 1. ##Кнопка для смены состояния сотрудника в строке состояния]
+
Будет открыто окно [.keyword .wintitle]*Смена состояния*, поля которого повторяют аналогичные поля карточки сотрудника в _Справочнике сотрудников_.

image::img/State_change_command_line.png[[.fig--title-label]##Рис. 2. ##Смена состояния сотрудника]
. [.ph .cmd]#В поле [.keyword]*Текущее состояние сотрудника* выберите из списка свое текущее состояние.#
. [.ph .cmd]#В поле [.keyword]*Состояние в период неактивности* укажите состояние, которое должно быть установлено в течение Вашего периода отсутствия. В поле доступны состояния: [.keyword .parmname]_Болен_, [.keyword .parmname]_В отпуске_, [.keyword .parmname]_В командировке_, [.keyword .parmname]_Отсутствует_. #
. [.ph .cmd]#В поле [.keyword]*Период отсутствия* задайте начальную и конечную даты периода своего отсутствия.#
. [.ph .cmd]#При необходимости, в поле [.keyword]*Заместители* назначьте заместителей на время своего отсутствия.#
. [.ph .cmd]#Нажмите на кнопку [.keyword]*ОК*.#
+
Выполненные настройки будут сохранены в карточке сотрудника _Справочника сотрудников_. Будет выполнено изменение текущего состояния сотрудника на указанное в поле. После наступления даты начала периода неактивности [.keyword]*Текущее* состояние сотрудника будет изменено на состояние, указанное в поле [.keyword]*Состояние в период неактивности*.

Если приложение _{wincl}_ будет запущено во время периода неактивности, пользователю будет выдано сообщение с предложением изменения состояния на активное:

* Если статус был изменен на неактивный, и не назначены заместители, появится сообщение: `Перевести учетную запись в                                     активное состояние?`;
* Если статус был изменен на неактивный, и назначены заместители, появится сообщение: `Для Вашей учетной записи в                                     настоящий момент действует замещение. Вы хотите отключить                                     замещение сейчас? Если Вы ответите "Нет", будет произведен вход                                     в систему без отключения замещения!`.  

При запуске _{wincl}_ сотрудником, который назначен заместителем, появится сообщение: `Вы назначены                             заместителем для сотрудника <ФИО1> с <дата> по <дата>,                             <ФИО2> с <дата> по <дата>…`. Если назначено несколько заместителей, сообщение получит первый активный заместитель.
