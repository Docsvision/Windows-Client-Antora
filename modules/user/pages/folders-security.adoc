= Безопасность папки

// tag::notitle[]
.Чтобы назначить права доступа к объекту по дискреционной модели безопасности:
. В {wincl}е откройте вкладку (окно) _Безопасность_ одним из следующих способов:
* Для папок: выберите из контекстного меню папки команду _Свойства_ или выберите в меню _Рабочего места Администратора {dv}_ (далее -- _РМА_) команду menu:Файл[Папка > Свойства].
* Для карточек: выберите из контекстного меню карточки команду _Безопасность_.
* Для файла, прикрепленного к карточке: выберите из контекстного меню файла команду menu:Дополнительно[Безопасность].
* Для справочника: выберите из контекстного меню справочника команду _Безопасность_.
* Для представлений: выберите в меню *РМА* menu:Вид[Текущее представление > Настройка представлений], в открывшемся окне _Представления_ нажать кнопку *Доступ...*.
+
[NOTE]
====
Подобным образом можно ограничить права пользователя на редактирование одного или нескольких представлений, имеющихся в системе.

Для настройки возможности использования представлений в конкретной папке следует воспользоваться диалогом настройки свойств папки.
====
+
* Для поисковых запросов: выберите на панели инструментов _РМА_ кнопку *Расширенный поиск*, в появившемся окне _Расширенный поиск_ нажмите кнопку *Сохранить как*. В открывшемся окне _Сохранение запроса_ нажмите кнопку *Доступ...*.
* Для свойства (пользовательского поля) карточки {dv} 4.5: нажмите кнопку *Доступ* в окне _Свойство_. Назначение прав доступа к свойству производится при его создании в справочнике типов. Так как справочник доступен не всем пользователям, способ вызова окна _Свойство_ здесь не приводится.
+
.Вкладка "Безопасность" окна свойств стандартной папки
image::engineer::discrete-folder.png[Вкладка "Безопасность" окна свойств стандартной папки]
+
Добавленную ранее учетную запись можно удалить при помощи кнопки *Удалить*.
+
. Нажмите кнопку *Добавить*, чтобы добавить в список лиц, имеющих права на объект, учетную запись или группу учетных записей пользователей.
+
Будет открыто окно для выбора учетной записи _Выбор справочника учетных записей_.
+
include::6.1@backoffice:desdirs:partial$excerpts.adoc[tags=account-select]
+
. В секции _Права для_ _Имя пользователя_ окна (вкладки) _Безопасность_ назначьте для добавленной учетной записи пользователя или группы пользователей права доступа к папке:
+
* Определите базовые права пользователя (_Полный доступ_, _Чтение_, _Изменение_, _Удаление_) в колонке _Разрешить_.
* Запретите пользователю определённые действия с папкой в колонке _Запретить_.
+
[NOTE]
====
Права доступа, определённые для папки, наследуются всеми дочерними объектами, если при настройке дополнительных параметров безопасности не определено иначе.
====
+
. При необходимости <<access-rights,настройте дополнительные параметры безопасности>>.
. Нажмите кнопку *ОК*.
+
Изменение, выполненное обычным пользователем, будет применено сразу же после сохранения. Если изменение выполнялось администратором, у обычных пользователей изменения будут применены после перезапуска {wincl}а или обновления дерева папок.

[#prohibit-delete]
== Запретить удаление карточки автору

По умолчанию при создании карточки автору предоставляются права на её чтение, изменение и удаление по дискреционной модели безопасности.

.Если требуется, можно отключить автоматическое назначение автору прав на удаление карточки:
. Откройте редактор реестра на машине Windows с серверными компонентами {dv}.
. Добавьте в ветку `{hklm-dv}BackOffice\Server\Extension` параметр `NoDeleteRightForCreator` с типом `DWORD` и значением `1`.
. Перезапустите сервер {dv}.

Теперь при создании карточки автору будут предоставляться права на чтение и изменение.

NOTE: Чтобы вернуть поведение по умолчанию (с предоставлением права на удаление), удалите добавленный параметр `NoDeleteRightForCreator`.

Параметр `NoDeleteRightForCreator` не влияет на ролевую модель безопасности.

[#access-rights]
== Настройка дополнительных параметров безопасности

.Чтобы настроить дополнительные параметров безопасности:
. Откройте вкладку (окно) _Безопасность_ и нажмите кнопку *Дополнительно*.
+
Будет открыто окно _Дополнительные параметры безопасности для "Название объекта"_.
+
.Окно настроек дополнительных параметров безопасности
image::engineer::discrete-folder.png[Окно настроек дополнительных параметров безопасности]
+
. Установите или снимите флаги, регулирующие наследование прав:
+
* Чтобы право доступа пользователя к родительской папке наследовалось для дочерней, установите флаг `*Заменить владельца подконтейнеров и объектов*`. По умолчанию флаг не установлен.
* Чтобы заменить ранее применяемые к дочерним объектам разрешения на новые, установите флаг `*Заменить все записи разрешений дочернего объекта наследуемыми от этого объекта*`, при этом:
+
** Устанавливать флаг имеет смысл после изменения разрешений для родительских объектов.
** При открытии окна флаг всегда снят.
** После установки флаг будет применен только один раз.
+
* Чтобы отменить наследование права доступа к данной папке от родительской папки, снимите флаг `*Заменить все записи разрешений дочернего объекта наследуемыми от этого объекта*` и в открывшемся окне (см. <<picture4,Рисунок 4>>) выберите нужную опцию:
+
** *Преобразовать унаследованные разрешения в явные разрешения этого объекта*: права доступа к родительской папке будут распространяться на дочернюю папку.
** *Удалить все унаследованные разрешения из этого объекта*: права доступа к родительской папке не будут распространяться на дочернюю папку.
+
[#picture4]
.Окно, появляющееся после отмены наследования прав
image::engineer::security-inheritance.png[Окно, появляющееся после отмены наследования прав]
+
* Чтобы вернуть пользователям наследование прав доступа к дочерней папке, установите флаг `*Заменить все записи разрешений дочернего объекта наследуемыми от этого объекта*`. В дальнейшем изменение прав доступа пользователей к родительской папке будет распространяться на права доступа к дочерней папке.
+
Последующие шаги посвящены настройке индивидуальных дополнительных параметров безопасности.
+
. Вернитесь к окну _Дополнительные параметры безопасности для "Название объекта"_ и выберите интересующий элемент из списка пользователей.
+
Будет открыто окно _Элемент разрешения для "Название объекта"_.
+
.Окно настроек дополнительных прав доступа
image::engineer::descrete-objects.png[Окно настроек дополнительных прав доступа]
+
. В окне _Элемент разрешения для "Название объекта"_ подробно определите права пользователя:
+
* _Полный доступ_ -- пользователю разрешены все возможные действия с папкой.
* _Чтение данных объекта_ -- пользователь может читать данные папки.
* _Изменение данных объекта_ -- пользователь может редактировать данные папки.
* _Создание дочерних объектов_ -- пользователь может создавать в папке дочерние папки и карточки.
* _Удаление дочерних объектов_ -- пользователь может удалять из папки дочерние папки и карточки.
* _Копирование объекта_ -- пользователь может копировать папку и её содержимое в другие папки.
* _Удаление объекта_ -- пользователь может удалять папку.
* _Чтение разрешений_ -- пользователь может просматривать права на папку.
* _Изменение разрешений_ -- пользователь может редактировать права на папку.
* _Смена владельца_ -- пользователь может менять владельца папки.
+
. Если требуется, чтобы права распространялись только "на один уровень вниз", т. е. наследовались только в отношении дочерних объектов данного объекта, установите флаг `*Заменить владельца подконтейнеров и объектов*`.
. Определите вид наследования пользователем прав доступа к дочерним объектам папки, выбрав из раскрывающегося списка _Применяется к_ нужную опцию:
+
* Этот объект.
* Дочерние контейнеры и объекты.
* Этот объект и дочерние контейнеры.
* Только дочерние контейнеры и объекты.
* Только дочерние контейнеры.
* Только дочерние объекты.

[#change-owner]
== Изменение владельца объекта

Владелец объекта -- лицо, которое может предоставить права доступа другим пользователям путём управления списком доступа. Владелец всегда может изменить разрешения для объекта даже если у него отсутствуют дискреционные права на объект, но есть достаточный уровень доступа.

По умолчанию владельцем объекта является его создатель. Рекомендуется вносить в список владельцев каждого объекта администратора.

.Владельцем объекта может стать:
* Администратор. По умолчанию группе _{dv-admins-dir}_ предоставляется право _Смена владельца_.
* Любой пользователь или любая группа, обладающая разрешением _Смена владельца_ для данного объекта.

Узнать, кто является владельцем объекта, можно в поле _Владелец_ окна _Дополнительные параметры безопасности для..._. Данные владельца отображаются в верхней части окна.

.Окно "Дополнительные параметры безопасности для объекта"
image::engineer::change-owner.png[Окно "Дополнительные параметры безопасности для объекта"]

Кнопка *Изменить* открывает окно поиска потенциальных владельцев объекта.

.Чтобы назначить владельцем объекта пользователя или группу:
. Нажмите кнопку *Изменить*.
. В открывшемся окне _Выбор справочника учетных записей_ укажите справочник учетных записей:
+
* *Стандартный* -- пользователи будут выбраны из списка учетных записей.
* *Специальный* -- пользователи будут выбраны из специальной карточки.
+
. Выберите владельца, которого нужно добавить:
+
* Если был выбран *Стандартный* справочник, в поле _Введите имена выбираемых объектов (примеры)_ укажите имя пользователя или группы и нажмите кнопку *ОК*.
* Если был выбран *Специальный* справочник, выберите нового владельца из справочника сотрудников и нажмите кнопку *ОК*.
+
. Чтобы назначить владельцем пользователя или группу из списка, выделите её и нажмите кнопку *ОК*.
. Чтобы сменить владельца всех субконтейнеров и объектов в дереве, установите опциональный флаг `*Заменить владельца субконтейнеров и объектов*`.
// end::notitle[]
