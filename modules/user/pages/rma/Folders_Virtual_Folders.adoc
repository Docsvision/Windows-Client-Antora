= Виртуальная папка

Виртуальные папки предназначены для отображения результатов расширенного поиска при помощи поискового запроса, указанного в её свойствах. По умолчанию виртуальные папки обозначаются значком image:buttons/folder-virtual-rma.png[Папка с лупой].

[#create]
== Создание виртуальной папки

[NOTE]
====
Перед созданием виртуальной папки создайте поисковый запрос к базе данных, на основе которого будет отбираться отображаемая в папке информация, или убедитесь, что подходящий запрос уже существует в системе.
====

.Чтобы создать виртуальную папку в PMA:
. Выделите в xref:rma/interface.adoc#tree[дереве папок] папку, в которой будет создана новая папка.
. Выберите в контекстном меню команду menu:Создать[Папку].
. Нажмите кнопку *Новая папка* -- image:buttons/folder-new-rma.png[Папка со звёздочкой] на  панели инструментов РМА.
. Выберите команду меню menu:Файл[Создать > Папку] или menu:Файл[Папка > Создать подпапку], чтобы открыть диалоговое окно _Создание новой папки_.
+
.Создание виртуальной папки
image::folder-new-rma.png[Создание виртуальной папки]
+
. Введите название папки в поле _Название папки_.
. Установите флаг `*Виртуальная*`.
. Выберите _Тип папки_.
+
include::partial$excerpts.adoc[tags=type]
+
. Выберите из соответствующих раскрывающихся списков _Тип фильтра_ и _Фильтр_ (подробнее см. раздел xref:Search_Advanced_Search.adoc[]), по которому в дальнейшем будет производиться отбор (фильтрация) данных в папку;
. Если условия поискового запроса содержат параметр, становится доступной кнопка *Параметры*. При нажатии этой кнопки открывается окно *Параметры поиска*, в котором можно указать или изменить значение параметра по умолчанию, применяемое в дальнейшем к данной виртуальной папке (значение по умолчанию в поисковом запросе изменено не будет).
+
Подробно создание поисковых запросов (в том числе и параметрических) и работа с ними описаны в главе *Расширенный поиск* настоящего руководства.
. Нажмите кнопку *ОК*.
+
[NOTE]
====
Настройки, определённые при создании папки, могут быть переопределены позднее в окне *Свойства папки*.
====

[#properties]
== Настройка свойств виртуальной папки

Для изменения параметров настройки виртуальной папки выполните следующие действия:. Выделите папку, свойства которой необходимо изменить, и откройте диалоговое окно *Свойства папки* одним из следующих способов:
* щелкните правой кнопкой мыши по нужной папке и выберите в появившемся контекстном меню команду *Свойства*;
* нажмите кнопку *Свойства* image:buttons/folder-properties-rma.png[Рука с папкой] панели инструментов _РМА_;
* выберите в меню последовательно команды menu:Файл[Папка > Свойства].
+
Будет открыто диалоговое окно *Свойства папки*, включающее вкладки *Общие*, *Представления*, *Шаблоны* и *Безопасность*.

image::Properties_Virtual_Folder.png[Окно свойств виртуальной папки. Вкладка "Общие".]
. Перейдите на вкладку *Общие* и определите общие настройки отображения карточек, находящихся в папке, сделав их отличными от установленных по умолчанию или указанных при создании папки:
* *Имя папки* -- название папки;
* *Размещение* -- положение папки в корневой папке; информационное поле, не доступное для изменения;
* при необходимости переопределите *Тип папки*;
* в поле *Представление* следует указать представление, которое будет использоваться для папки по умолчанию; представление можно выбрать с помощью одной из двух кнопок этого поля: при нажатии кнопки image:buttons/triangle-down-rma.png[Треугольник вниз] откроется для выбора список представлений, отсортированных по алфавиту, а при нажатии кнопки image:admin:buttons/three-dots.png[Три точки] -- диалоговое окно *Выберите представление*, в котором отображается дерево представлений; в оба варианта выбора включаются только те представления, которые были разрешены для использования в данной папке на вкладке *Представления*;
+
[NOTE]
====
Пользователь может в любой момент выбрать другое представление из разрешённых для текущей папки при помощи команды меню menu:Вид[Текущее представление].
====
* в раскрывающемся списке поля *Шаблон* выберите для папки название шаблона Excel, который будет использоваться по умолчанию для экспорта данных папки (набор разрешённых для папки шаблонов определяется на вкладке *Шаблоны*);
* укажите тип фильтра в соответствующем поле, а в поле *Фильтр* выберите название поискового запроса из числа имеющихся в списке: при выборе папки её содержимое будет автоматически обновляться в соответствии с указанным здесь запросом; фильтр выбирается аналогично представлению.
+
include::partial$excerpts.adoc[tags=other]
+
image::folder-additional-attributes-rma-std.png[Окно "Дополнительные атрибуты" свойств папки]
. Чтобы сменить значок (иконку) папки, который отображается на левой панели _РМА_, нажмите кнопку *Сменить значок* и выберите иконку из предложенного списка. Восстановить вид значка, определённый по умолчанию, можно при помощи кнопки *Восстановить значок*.
. Перейдите на вкладку *Представления*, чтобы определить набор представлений, разрешённый для показа в папке. На этой вкладке отображается иерархический список (дерево) всех имеющихся представлений; узлами дерева являются группы представлений.
* Чтобы разрешить отображение в папке только определённых представлений, установите флаг *Только эти представления могут быть показаны в этой папке* и далее -- флажки возле названий представлений, которые могут использоваться для данной папки.
* Запретить использование любых представлений, кроме дайджеста можно, установив флаг *Только эти представления могут быть показаны в этой папке* и не выбрав ни одного представления.
* Чтобы разрешить или запретить определённым пользователям доступ к какому-либо представлению, выделите его и нажмите кнопку *Разрешения*. В открывшемся окне добавьте нужного пользователя и определите его права на использование данного представления в текущей папке.
+
image::Properties_Virtual_Folder_View.png[Окно свойств папки. Вкладка "Представления"]
. Перейдите на вкладку *Шаблоны*, чтобы определить набор шаблонов Microsoft Excel, в которые можно экспортировать данные папки. На этой вкладке отображается список всех имеющихся в системе шаблонов. Чтобы разрешить экспорт данных папки только в определённые шаблоны Microsoft Excel, установите флаг *Только эти шаблоны могут быть использованы с этой папкой*, а затем установите флажки напротив названий шаблонов, которые будут доступны для передачи данных папки в Microsoft Excel.
+
image::folder-properties-templates-rma.png[Вкладка "Шаблоны" свойств виртуальной папки]
. Перейдите на вкладку *Безопасность* и xref:Access_Rights.adoc[настройте права доступа] пользователей к папке.
